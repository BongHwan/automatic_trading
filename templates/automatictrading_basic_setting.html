<!-- automatictrading_setting.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>자동 트레이딩 설정</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>자동 트레이딩 설정</h2>

    <form id="settings-form">
        <label>
            자동 실행:
            <input type="checkbox" name="basic_auto_start" {% if arg.basic_auto_start == 'True' %}checked{% endif %}>
        </label>
        <br>

        <label>
            실행 간격 (cron):
            <input type="text" name="basic_interval" value="{{ arg.basic_interval }}">
        </label>
        <br>

        <label>
            거래 금액 비율 (%):
            <input type="number" name="basic_trade_amount_percent" value="{{ arg.basic_trade_amount_percent }}">
        </label>
        <br>

        <label>
            레버리지:
            <input type="number" name="basic_leverage" value="{{ arg.basic_leverage }}">
        </label>
        <br>

        <label>
            익절 %:
            <input type="number" name="basic_take_profit_percent" value="{{ arg.basic_take_profit_percent }}">
        </label>
        <br>

        <label>
            손절 %:
            <input type="number" name="basic_stop_loss_percent" value="{{ arg.basic_stop_loss_percent }}">
        </label>
        <br>

        <label>
            최대 보유 시간 (분):
            <input type="number" name="basic_max_holding_minutes" value="{{ arg.basic_max_holding_minutes }}">
        </label>
        <br>

        <label>
            모드:
            <select name="basic_mode">
                <option value="simulation" {% if arg.basic_mode == 'simulation' %}selected{% endif %}>Simulation</option>
                <option value="real" {% if arg.basic_mode == 'real' %}selected{% endif %}>Real</option>
            </select>
        </label>
        <br>

        <h3>Telegram 알림</h3>
        <label>
            활성화:
            <input type="checkbox" name="basic_telegram_enabled" {% if arg.basic_telegram_enabled == 'True' %}checked{% endif %}>
        </label>
        <br>

        <label>
            BOT TOKEN:
            <input type="text" name="basic_telegram_api_key" value="{{ arg.basic_telegram_api_key }}">
        </label>
        <br>

        <label>
            CHAT ID:
            <input type="text" name="basic_telegram_chat_id" value="{{ arg.basic_telegram_chat_id }}">
        </label>
        <br>

        <button type="button" id="save-settings">저장</button>
        <button type="button" id="test-trade">테스트 트레이딩</button>
    </form>

    <div id="result"></div>

    <script>
        $(document).ready(function() {
            // 저장
            $("#save-settings").click(function() {
                $.post("/plugins/automatictrading/basic/process_command", $("#settings-form").serialize() + "&command=save_settings", function(data) {
                    $("#result").text(data.modal);
                });
            });

            // 테스트 트레이딩
            $("#test-trade").click(function() {
                $.post("/plugins/automatictrading/basic/process_command", {command: "test_trade"}, function(data) {
                    $("#result").text(data.modal);
                });
            });
        });
    </script>
</body>
</html>
