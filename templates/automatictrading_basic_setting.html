{% extends "base.html" %}
{% block content %}

{{ macros.m_button_group([['globalSettingSaveBtn', '설정 저장'], ['globalOneExecuteBtn', '1회 실행'], ['globalImmediatelyExecuteBtn', '즉시 실행']])}}
{{ macros.m_row_start('5') }}
{{ macros.m_row_end() }}

<nav>
  {{ macros.m_tab_head_start() }}
    {{ macros.m_tab_head('normal', '기본', true) }}
    {{ macros.m_tab_head('telegram', '텔레그램', false) }}
    {{ macros.m_tab_head('advanced', '고급', false) }}
  {{ macros.m_tab_head_end() }}
</nav>

<form id="setting">
  <div class="tab-content" id="nav-tabContent">
    
    {{ macros.m_tab_content_start('normal', true) }}
      {{ macros.setting_input_number('trade_amount_percent', '투자 금액(%)', value=arg['trade_amount_percent'], col=3) }}
      {{ macros.setting_input_number('leverage', '레버리지', value=arg['leverage'], col=3) }}
      {{ macros.setting_input_number('take_profit_percent', '익절(%)', value=arg['take_profit_percent'], col=3) }}
      {{ macros.setting_input_number('stop_loss_percent', '손절(%)', value=arg['stop_loss_percent'], col=3) }}
      {{ macros.setting_input_number('max_holding_minutes', '최대 보유시간(분)', value=arg['max_holding_minutes'], col=3) }}
      {{ macros.setting_select('mode', '모드', options=[['simulation','시뮬레이션'], ['live','실거래']], value=arg['mode']) }}
    {{ macros.m_tab_content_end() }}
    
    {{ macros.m_tab_content_start('telegram', false) }}
      {{ macros.setting_input_text('telegram_api_key', 'Telegram API Key', value=arg['telegram_api_key'], col=6) }}
      {{ macros.setting_input_text('telegram_chat_id', 'Telegram Chat ID', value=arg['telegram_chat_id'], col=6) }}
    {{ macros.m_tab_content_end() }}
    
    {{ macros.m_tab_content_start('advanced', false) }}
      {{ macros.info_text('추가 고급 옵션이나 로그 등 필요시 여기에 배치') }}
    {{ macros.m_tab_content_end() }}
    
  </div>
</form>

<script type="text/javascript">
$(document).ready(function(){
  // 초기화 스크립트 필요시 작성
});

$("body").on('click', '#save_btn', function(e){
  e.preventDefault();
  globalSendCommand('setting_save', null, null, null, function(ret){
    if(ret === true){
      alert('설정이 저장되었습니다.');
    }
  });
});
</script>

{% endblock %}
